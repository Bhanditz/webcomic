!function(){"use strict";!function e(){function t(e){var t=new FormData,n=new XMLHttpRequest;t.append("action","webcomic_generator_start_date"),t.append("date",e.value),n.onreadystatechange=function(){4===n.readyState&&(document.querySelector('label[for="'+e.name+'"]').innerHTML=JSON.parse(n.responseText)[0])},n.open("POST",ajaxurl),n.send(t)}function n(e){var t=new FormData(e),n=new XMLHttpRequest;t.append("action","webcomic_generator_preview"),n.onreadystatechange=function(){if(4===n.readyState){for(var e=document.querySelectorAll("table.media tbody > tr td:last-child"),t=[],r=0;r<e.length;r++)e[r].innerHTML="&mdash;";if(n.responseText){t=JSON.parse(n.responseText);for(var a=0;a<t.length;a++)document.querySelector('table.media tbody [data-id="'+t[a].id+'"] td:last-child').innerHTML=t[a].date}}},n.open("POST",ajaxurl),n.send(t)}if("loading"===document.readyState)return document.addEventListener("DOMContentLoaded",e);!function(e){var t=document.createElement("th"),n=document.createElement("td"),r=e.querySelectorAll("tbody > tr");t.innerHTML=webcomicGeneratorL10n.publish,e.querySelector("thead tr").appendChild(t);for(var a=0;a<r.length;a++)r[a].appendChild(n.cloneNode())}(document.querySelector("table.media"));for(var r=document.querySelectorAll("input, select"),a=0;a<r.length;a++){(function(e){if(r[e].addEventListener("change",function(){return setTimeout(function(){return n(document.querySelector("#webcomic_generator"))},1)}),"webcomic_generator[start_date]"!==r[e].name)return"continue";r[e].addEventListener("change",function(){return t(r[e])}),r[e].dispatchEvent(new Event("change"))})(a)}jQuery("table.media tbody").sortable({items:"tr",start:function(e,t){t.placeholder.height(t.helper.outerHeight())},stop:function(){document.querySelector('[name="webcomic_generator[collection]"]').dispatchEvent(new Event("change"))}})}()}();
