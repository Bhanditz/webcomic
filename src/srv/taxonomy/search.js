!function(){"use strict";!function t(){function e(t,e){var n=document.querySelector('[name="'+t.getAttribute("data-input")+'"]'),r=new FormData,c=new XMLHttpRequest;n.value=e,n.value!==e&&n.dispatchEvent(new Event("change",{bubbles:!0})),r.append("action","webcomic_update_comic_term_search"),r.append("term",e),c.onreadystatechange=function(){if(4===c.readyState)return e?void i(t,JSON.parse(c.responseText)):(a(t),void t.querySelector("input").dispatchEvent(new Event("input")))},c.open("POST",ajaxurl),c.send(r)}function a(t){t.querySelector("input")||(t.innerHTML='<input type="search" id="'+t.getAttribute("data-webcomic-term-search")+'" class="widefat" placeholder="'+t.getAttribute("data-webcomic-term-search-search")+'">'),t.querySelector("div")||(t.innerHTML+="<div></div>"),t.querySelector("input").addEventListener("input",function(e){n(t,e.target.value)})}function n(t,e){var a=new FormData,n=new XMLHttpRequest;a.append("action","webcomic_update_comic_term_search"),a.append("query",e),a.append("taxonomy",t.getAttribute("data-webcomic-term-taxonomy")),n.onreadystatechange=function(){4===n.readyState&&r(t,e,JSON.parse(n.responseText))},n.open("POST",ajaxurl),n.send(a)}function r(t,a,n){for(var r='<table class="widefat fixed striped media">',i=0;i<n.length;i++)r+='\n\t\t\t<tr data-id="'+n[i].term_id+'">\n\t\t\t\t<td class="title column-title column-primary">\n\t\t\t\t\t<strong class="has-media-icon">\n\t\t\t\t\t\t<span class="media-icon image-icon">'+n[i].webcomic_term_media+"</span>\n\t\t\t\t\t\t"+n[i].name+"\n\t\t\t\t\t</strong>\n\t\t\t\t</td>\n\t\t\t</tr>";if(a&&!n.length&&(r+="<tr><td>"+t.getAttribute("data-webcomic-term-search-null")+"</td></tr>"),r+="</table>",t.querySelector("div").innerHTML=r.replace('<table class="widefat fixed striped media"></table>',"<small>"+t.getAttribute("data-webcomic-term-search-info")+"</small>"),n)for(var c=t.querySelectorAll("[data-id]"),d=0;d<c.length;d++)!function(a){c[a].addEventListener("click",function(){e(t,Number(c[a].getAttribute("data-id")))})}(d)}function i(t,a){t.innerHTML='\n\t\t\t<a class="dashicons dashicons-no">\n\t\t\t\t<span class="screen-reader-text">'+t.getAttribute("data-webcomic-term-search-remove")+"</span>\n\t\t\t</a>\n\t\t\t<strong>"+a.title+"</strong><br>\n\t\t\t"+a.media,t.querySelector("a").addEventListener("click",function(){e(t,0)})}if("loading"===document.readyState)return document.addEventListener("DOMContentLoaded",t);for(var c=document.querySelectorAll("[data-webcomic-term-search]"),d=0;d<c.length;d++)e(c[d],Number(document.querySelector('[name="'+c[d].getAttribute("data-input")+'"]').value));jQuery(document).on("widget-added widget-updated",function(t,a){if(a[0].id.match(/_mgsisk_webcomic_/))for(var n=a[0].querySelectorAll("[data-webcomic-term-search]"),r=0;r<n.length;r++)e(n[r],Number(document.querySelector('[name="'+n[r].getAttribute("data-input")+'"]').value))})}()}();
